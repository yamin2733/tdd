<!doctype html>
<html lang="en">
  <head>
    <title>To-Do lists</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body>
    <div class="container">

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">Superlists</a>
      {% if user.email %}
       <ul class="nav navbar-nav navbar-right">
         <li class="navbar-text">Logged in as {{ user.email }}</li>
         <li><a href="{% url 'logout' %}">Log out</a></li>
        </ul>
      {% else %}
        <form class="navbar-form navbar-right" method="POST" action ="{% url 'send_login_email' %}">
          <span>Enter email to log in: </span><input class="form-control" name="email" type="text" />
          {% csrf_token %}
        </form>
      {% endif %}
      </div>
     </nav>

     {% if messages %}
        <div class="row">
          <div class="col-md-8">
            {% for message in messages %}
              {% if message.level_tag == 'success' %}
                <div class="alert alert-success">{{ message }}</div>
              {% else %}
                <div class="alert alert-warning">{{ message }}</div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      {% endif %}
  
      <div class="row justify-content-center p-5 bg-body-tertiary rounded-3">
        <div class="col-lg-6 text-center">
          <h1 class="display-1 mb-4">{% block header_text %}{% endblock %}</h1>
          <form method="POST" action="{% block form_action %}{% endblock %}">

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>    
    <script src="/static/tests/qunit-2.6.0.js"></script>
    <script src="/static/tests/qunit-2.6.0.css"></script>

            {{ form.text }}
            {% csrf_token %}
            {% if form.errors %}
             <div class="form-group has-error">
              <div class="help-block">{{ form.text.errors }}</div> 
             </div>
            {% endif %}
          </form>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-lg-6">
          {% block table %}
          {% endblock %}
        </div>
      </div>
    </div>
<script src="/static/list.js"></script>
<script> 

  $(document).ready(function () 
  {window.Superlists.initialize();}); 

</script> 
  </body>
</html>
